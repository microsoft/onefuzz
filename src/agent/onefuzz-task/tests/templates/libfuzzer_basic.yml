# yaml-language-server: $schema=../../src/local/schema.json

required_args: &required_args
  target_exe: "{TEST_ROOT}/fuzz.exe" # The path to your target
  inputs: &inputs "{TEST_ROOT}/inputs" # A folder containining your inputs
  crashes: &crashes "{TEST_ROOT}/crashes" # The folder where you want the crashing inputs to be output
  crashdumps: "{TEST_ROOT}/crashdumps" # The folder where you want the crash dumps to be output
  coverage: "{TEST_ROOT}/coverage" # The folder where you want the code coverage to be output
  regression_reports: "{TEST_ROOT}/regression_reports" # The folder where you want the regression reports to be output
  target_env: {}
  target_options: []
  target_workers: 1

tasks:
  - type: LibFuzzer
    <<: *required_args
    readonly_inputs: []
    check_fuzzer_help: true

  - type: LibfuzzerRegression
    <<: *required_args

  - type: "LibfuzzerCrashReport"
    <<: *required_args
    input_queue: *crashes
    check_fuzzer_help: true

  - type: "Coverage"
    <<: *required_args
    target_options:
      - "{input}"
    input_queue: *inputs
    readonly_inputs: [*inputs]
